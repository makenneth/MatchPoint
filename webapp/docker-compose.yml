version: '3'
services:
  redis-server:
    image: "redis:alpine"
    ports:
      - "${REDIS_PORT}:6379"

  web:
    image: web-app
    build: .
    network_mode: "host"
    ports:
      - "${APP_PORT}:${APP_PORT}"
    environment:
      - DB_USER=root
      - DB_PORT=3306
      - DB_PASSWORD=${DB_PASSWORD}
      - DB=matchpoints
      - DOMAIN=${DOMAIN}
      - APP_HOST=${APP_HOST}
      - APP_PORT=${APP_PORT}
      - NODE_ENV=${NODE_ENV}
      - HOST=${HOST}
      - REDIS_HOST=${REDIS_HOST}
      - WEB_HOST=${WEB_HOST}
      - WEBSOCKET_SERVER=${WEBSOCKET_SERVER}
      - EMAIL_USER=noreplymatchpoints@gmail.com
      - EMAIL_PASS=matchpointsorg
